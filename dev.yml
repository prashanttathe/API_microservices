---
apiVersion: apps/v1	
kind: Deployment	
metadata:	
  name: api	
  namespace: dev	
spec:	
  replicas: 1	
  selector:	
    matchLabels:	
      app: api	
  template:	
    metadata:	
      labels:	
        app: api	
    spec:	
      containers:	
      - name: api	
        image: tntaksreg.azurecr.io/api:latest	
        ports:	
        - containerPort: 8080	

---
apiVersion: v1	
kind: Service	
metadata:	
  name: api-service	
  namespace: dev	
spec:	
  type: ClusterIP	
  selector:	
    app: api	
  ports:	
    - protocol: TCP	
      port: 80	
      targetPort: 8080	

---
apiVersion: networking.k8s.io/v1beta1	
kind: Ingress	
metadata:	
  name: api-ingress	
  namespace: dev	
  annotations:	
    kubernetes.io/ingress.class: addon-http-application-routing	
spec:	
  rules:	
  - host: api.e46708b92c054086909b.eastus.aksapp.io	
    http:	
      paths:	
      - backend:	
          serviceName: api-service	
          servicePort: 80
        path: /
